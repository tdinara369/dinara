/*

 Sexy LightBox - for jQuery 1.3.2
 @name      sexylightbox.v2.3.js
 @author    Eduardo D. Sada - http://www.coders.me/web-html-js-css/javascript/sexy-lightbox-2
 @version   2.3.4
 @date      10-Nov-2009
 @copyright (c) 2009 Eduardo D. Sada (www.coders.me)
 @license   MIT - http://es.wikipedia.org/wiki/Licencia_MIT
 @example   http://www.coders.me/ejemplos/sexy-lightbox-2/
*/
if("undefined"==typeof __jQuery__)var __jQuery__=jQuery;
(function(c){c.bind=function(b,a){var c=Array.prototype.slice.call(arguments,2);return function(){var f=[this].concat(c,jQuery.makeArray(arguments));return a.apply(b,f)}};SexyLightbox={getOptions:function(){return{name:"SLB",zIndex:32E3,color:"black",find:"sexylightbox",dir:"css",emergefrom:"top",background:"bgSexy.png",backgroundIE:"bgSexy.gif",buttons:"buttons.png",displayed:0,showDuration:200,closeDuration:400,moveDuration:1E3,moveEffect:"easeInOutBack",resizeDuration:1E3,resizeEffect:"easeInOutBack",
shake:{distance:10,duration:100,transition:"easeInOutBack",loops:2},BoxStyles:{width:486,height:320},Skin:{white:{hexcolor:"#FFFFFF",captionColor:"#000000","background-color":"#000000",opacity:0.6},black:{hexcolor:"#000000",captionColor:"#FFFFFF","background-color":"#000000",opacity:0.6},blanco:{hexcolor:"#FFFFFF",captionColor:"#000000","background-color":"#000000",opacity:0.6},negro:{hexcolor:"#000000",captionColor:"#FFFFFF","background-color":"#000000",opacity:0.6}}}},overlay:{create:function(b){this.options=
b;this.element=c('<div id="'+(new Date).getTime()+'"></div>');this.element.css(c.extend({},{position:"absolute",top:0,left:0,opacity:0,display:"none","z-index":this.options.zIndex},this.options.style));this.element.bind("click",c.bind(this,function(a,b){this.options.hideOnClick&&(this.options.callback?this.options.callback():this.hide());b.preventDefault()}));this.hidden=!0;this.inject()},inject:function(){this.target=c(document.body);this.target.append(this.element);if(c.browser.msie&&"6.0"==c.browser.version){var b=
parseInt(this.element.css("zIndex"));if(!b){var b=1,a=this.element.css("position");("static"==a||!a)&&this.element.css({position:"relative"});this.element.css({zIndex:b})}b=(this.options.zIndex||0===this.options.zIndex)&&b>this.options.zIndex?this.options.zIndex:b-1;0>b&&(b=1);this.shim=c('<iframe id="IF_'+(new Date).getTime()+'" scrolling="no" frameborder=0 src=""></div>');this.shim.css({zIndex:b,position:"absolute",top:0,left:0,border:"none",opacity:0});this.shim.insertAfter(this.element)}},resize:function(b,
a){this.element.css({height:0,width:0});this.shim&&this.shim.css({height:0,width:0});var d=c(document).width(),f=c(document).height(),d=c.browser.safari?d-25<document.body.clientWidth?document.body.clientWidth:d:d;this.element.css({width:b?b:d,height:a?a:f});this.shim&&(this.shim.css({height:0,width:0}),this.shim.css({width:b?b:d,height:a?a:f}));return this},show:function(){if(!this.hidden)return this;this.transition&&this.transition.stop();this.target.bind("resize",c.bind(this,this.resize));this.resize();
this.shim&&this.shim.css({display:"block"});this.hidden=!1;this.transition=this.element.fadeIn(this.options.showDuration,c.bind(this,function(){this.element.trigger("show")}));return this},hide:function(){if(this.hidden)return this;this.transition&&this.transition.stop();this.target.unbind("resize");this.shim&&this.shim.css({display:"none"});this.hidden=!0;this.transition=this.element.fadeOut(this.options.closeDuration,c.bind(this,function(){this.element.trigger("hide");this.element.css({height:0,
width:0})}));return this}},backwardcompatibility:function(b){this.options.dir=b.imagesdir||b.path||b.folder||b.dir;this.options.OverlayStyles=c.extend(this.options.Skin[this.options.color],this.options.OverlayStyles||{})},preloadimage:function(b){img=new Image;img.src=b},initialize:function(b){this.options=c.extend(this.getOptions(),b);this.backwardcompatibility(this.options);b=this.options.dir+"/"+this.options.color+"/"+(void 0==window.XMLHttpRequest&&void 0!=ActiveXObject?this.options.backgroundIE:
this.options.background);var a=this.options.name;this.preloadimage(b);this.preloadimage(this.options.dir+"/"+this.options.color+"/"+this.options.buttons);this.overlay.create({style:this.options.Skin[this.options.color],hideOnClick:!0,zIndex:this.options.zIndex-1,callback:c.bind(this,this.close),showDuration:this.options.showDuration,showEffect:this.options.showEffect,closeDuration:this.options.closeDuration,closeEffect:this.options.closeEffect});this.lightbox={};c("body").append('<div id="'+a+'-Wrapper"><div id="'+
a+'-Background"></div><div id="'+a+'-Contenedor"><div id="'+a+'-Top" style="background-image: url('+b+')"><a id="'+a+'-CloseButton" href="#">&nbsp;</a><div id="'+a+'-TopLeft" style="background-image: url('+b+')"></div></div><div id="'+a+'-Contenido"></div><div id="'+a+'-Bottom" style="background-image: url('+b+')"><div id="'+a+'-BottomRight" style="background-image: url('+b+')"><div id="'+a+'-Navegador"><strong id="'+a+'-Caption"></strong></div></div></div></div></div>');this.Wrapper=c("#"+a+"-Wrapper");
this.Background=c("#"+a+"-Background");this.Contenedor=c("#"+a+"-Contenedor");this.Top=c("#"+a+"-Top");this.CloseButton=c("#"+a+"-CloseButton");this.Contenido=c("#"+a+"-Contenido");this.bb=c("#"+a+"-Bottom");this.innerbb=c("#"+a+"-BottomRight");this.Nav=c("#"+a+"-Navegador");this.Descripcion=c("#"+a+"-Caption");this.Wrapper.css({"z-index":this.options.zIndex,display:"none"}).hide();this.Background.css({"z-index":this.options.zIndex+1});this.Contenedor.css({position:"absolute",width:this.options.BoxStyles.width,
"z-index":this.options.zIndex+2});this.Contenido.css({height:this.options.BoxStyles.height,"border-left-color":this.options.Skin[this.options.color].hexcolor,"border-right-color":this.options.Skin[this.options.color].hexcolor});this.CloseButton.css({"background-image":"url("+this.options.dir+"/"+this.options.color+"/"+this.options.buttons+")"});this.Nav.css({color:this.options.Skin[this.options.color].captionColor});this.Descripcion.css({color:this.options.Skin[this.options.color].captionColor});
this.CloseButton.bind("click",c.bind(this,function(){this.close();return!1}));c(document).bind("keydown",c.bind(this,function(b,a){1==this.options.displayed&&(27==a.keyCode&&this.close(),37==a.keyCode&&this.prev&&this.prev.trigger("click",a),39==a.keyCode&&this.next&&this.next.trigger("click",a))}));c(window).bind("resize",c.bind(this,function(){1==this.options.displayed&&(this.replaceBox(),this.overlay.resize())}));c(window).bind("scroll",c.bind(this,function(){1==this.options.displayed&&this.replaceBox()}));
this.refresh()},hook:function(b){b=c(b);b.blur();this.show(b.attr("title")||b.attr("name")||"",b.attr("href"),b.attr("rel")||!1)},close:function(){this.animate(0)},refresh:function(){var b=this;this.anchors=[];c("a, area").each(function(){c(this).attr("rel")&&RegExp("^"+b.options.find).test(c(this).attr("rel"))&&(c(this).click(function(a){a.preventDefault();b.hook(this)}),c(this).attr("id")==b.options.name+"-Left"||c(this).attr("id")==b.options.name+"-Right"||b.anchors.push(this))})},animate:function(b){0==
this.options.displayed&&0!=b||1==b?(this.overlay.show(),this.options.displayed=1,this.Wrapper.css({display:"block"})):(this.Wrapper.css({display:"none",top:-(this.options.BoxStyles.height+280)}).hide(),this.overlay.hide(),this.overlay.element.bind("hide",c.bind(this,function(){this.options.displayed&&(this.Image&&this.Image.remove(),this.options.displayed=0)})))},replaceBox:function(b){var a=c(window).width(),d=c(window).height(),f=c(window).scrollLeft(),h=c(window).scrollTop(),k=this.options.BoxStyles.width,
g=this.options.BoxStyles.height;if(0==this.options.displayed){var e=0,e="bottom"==this.options.emergefrom?h+d+80:h-g-80;this.Wrapper.css({display:"none",top:e,left:f+(a-k)/2});this.Contenedor.css({width:k});this.Contenido.css({height:g-80})}b=c.extend({},{width:this.lightbox.width,height:this.lightbox.height,resize:0},b);this.MoveBox&&this.MoveBox.stop();this.MoveBox=this.Wrapper.animate({left:f+(a-b.width)/2,top:h+(d-(b.height+(this.navigator?80:48)))/2},{duration:this.options.moveDuration,easing:this.options.moveEffect});
b.resize&&(this.ResizeBox2&&this.ResizeBox2.stop(),this.ResizeBox2=this.Contenido.animate({height:b.height},{duration:this.options.resizeDuration,easing:this.options.resizeEffect}),this.ResizeBox&&this.ResizeBox.stop(),this.ResizeBox=this.Contenedor.animate({width:b.width},{duration:this.options.resizeDuration,easing:this.options.resizeEffect,complete:function(){c(this).trigger("complete")}}))},getInfo:function(b,a){b=c(b);IEuta=c('<a id="'+this.options.name+"-"+a+'" rel="'+b.attr("rel")+'">&nbsp;</a>');
IEuta.css({"background-image":"url("+this.options.dir+"/"+this.options.color+"/"+this.options.buttons+")"});IEuta.attr("title",b.attr("title"));IEuta.attr("href",b.attr("href"));return IEuta},display:function(b,a,c){return this.show(a,b,"",c)},show:function(b,a,d,f){this.showLoading();var h=a.match(/(.+)?/)[1]||a,k=/\.(jpe?g|png|gif|bmp)/gi,g=a.match(/\?(.+)/);g&&(g=g[1]);var e=this.parseQuery(g);this.ResizeBox&&this.ResizeBox.unbind("complete");e=c.extend({},{width:0,height:0,modal:0,background:"",
title:b},e||{});e.width=parseInt(e.width);e.height=parseInt(e.height);e.modal=parseInt(e.modal);this.overlay.options.hideOnClick=!e.modal;this.lightbox=c.extend({},e,{width:e.width+14});this.navigator=this.lightbox.title?!0:!1;if("image"==f||h.match(k))this.img=new Image,this.img.onload=c.bind(this,function(){this.img.onload=function(){};if(!e.width){var a=this.calculate(this.img.width,this.img.height);e.width=a.x;e.height=a.y;this.lightbox.width=e.width+14}this.lightbox.height=e.height-(this.navigator?
21:35);this.replaceBox({resize:1});this.ResizeBox.bind("complete",c.bind(this,function(){this.showImage(this.img.src,e)}))}),this.img.onerror=c.bind(this,function(){this.show("",this.options.imagesdir+"/"+this.options.color+"/404.png",this.options.find)}),this.img.src=a;else if(this.lightbox.height=e.height+(c.browser.opera?2:0),this.replaceBox({resize:1}),-1!=a.indexOf("TB_inline"))this.ResizeBox.bind("complete",c.bind(this,function(){this.showContent(c("#"+e.inlineId).html(),this.lightbox)}));else if(-1!=
a.indexOf("TB_iframe")){var p=a.split("TB_");this.ResizeBox.bind("complete",c.bind(this,function(){this.showIframe(p[0],this.lightbox)}))}else this.ResizeBox.bind("complete",c.bind(this,function(){c.ajax({url:a,type:"GET",cache:!1,error:c.bind(this,function(){this.show("",this.options.imagesdir+"/"+this.options.color+"/404html.png",this.options.find)}),success:c.bind(this,this.handlerFunc)})}));this.prev=this.next=!1;if(d.length>this.options.find.length){this.navigator=!0;var m=!1,n=!1,l=this;c.each(this.anchors,
function(b){c(this).attr("rel")==d&&!n&&(c(this).attr("href")==a?m=!0:m?(l.next=l.getInfo(this,"Right"),n=!0):l.prev=l.getInfo(this,"Left"))})}this.addButtons();this.showNavBar(b);this.animate(1)},calculate:function(b,a){var d=c(window).width()-100,f=c(window).height()-100;b>d?(a*=d/b,b=d,a>f&&(b*=f/a,a=f)):a>f&&(b*=f/a,a=f,b>d&&(a*=d/b,b=d));return{x:parseInt(b),y:parseInt(a)}},handlerFunc:function(b,a){this.showContent(a,this.lightbox)},addButtons:function(){this.prev&&this.prev.bind("click",c.bind(this,
function(b,a){a.preventDefault();this.hook(this.prev)}));this.next&&this.next.bind("click",c.bind(this,function(b,a){a.preventDefault();this.hook(this.next)}))},showNavBar:function(){this.navigator?(this.bb.addClass("SLB-bbnav"),this.Nav.empty(),this.innerbb.empty(),this.innerbb.append(this.Nav),this.Descripcion.html(this.lightbox.title),this.Nav.append(this.prev),this.Nav.append(this.next),this.Nav.append(this.Descripcion)):(this.bb.removeClass("SLB-bbnav"),this.innerbb.empty())},showImage:function(b,
a){this.Background.empty().removeAttr("style").append('<img id="'+this.options.name+'-Image"/>');this.Image=c("#"+this.options.name+"-Image").attr({src:b,width:a.width,height:a.height}).css({width:a.width,height:a.height});this.Contenedor.css({background:"none"});this.Contenido.empty().css({"background-color":"transparent",padding:"0px",width:"auto"})},showContent:function(b,a){this.Background.empty().css({width:a.width-14,height:a.height+35,"background-color":a.background||"#ffffff"});this.Contenido.empty().css({width:a.width-
14,"background-color":a.background||"#ffffff"}).append('<div id="'+this.options.name+'-Image"/>');this.Image=c("#"+this.options.name+"-Image");this.Image.css({width:a.width-14,height:a.height,overflow:"auto",background:a.height||"#ffffff"}).append(b);this.Contenedor.css({background:"none"})},showIframe:function(b,a,d){this.Background.empty().css({width:a.width-14,height:a.height+35,"background-color":a.background||"#ffffff"});d="if_"+(new Date).getTime()+"-Image";this.Contenido.empty().css({width:a.width-
14,"background-color":a.background||"#ffffff",padding:"0px"}).append('<iframe id="'+d+'" frameborder="0"></iframe>');this.Image=c("#"+d);this.Image.css({width:a.width-14,height:a.height,background:a.background||"#ffffff"}).attr("src",b);this.Contenedor.css({background:"none"})},showLoading:function(){this.Background.empty().removeAttr("style").css({width:"auto",height:"auto"});this.Contenido.empty().css({"background-color":"transparent",padding:"0px",width:"auto"});this.Contenedor.css({background:"url("+
this.options.imagesdir+"/"+this.options.color+"/loading.gif) no-repeat 50% 50%"});this.Contenido.empty().css({"background-color":"transparent",padding:"0px",width:"auto"});this.replaceBox(c.extend(this.options.BoxStyles,{resize:1}))},parseQuery:function(b){if(!b)return{};var a={};b=b.split(/[;&]/);for(var c=0;c<b.length;c++){var f=b[c].split("=");f&&2==f.length&&(a[unescape(f[0])]=unescape(f[1]).replace(/\+/g," "))}return a},shake:function(){var b=this.options.shake.distance,a=this.Wrapper.position(),
a=a.left;for(x=0;x<this.options.shake.loops;x++)this.Wrapper.animate({left:a+b},this.options.shake.duration,this.options.shake.transition).animate({left:a-b},this.options.shake.duration,this.options.shake.transition);this.Wrapper.animate({left:a+b},this.options.shake.duration,this.options.shake.transition).animate({left:a},this.options.shake.duration,this.options.shake.transition)}}})(__jQuery__);
